md-dialog(aria-label="Login")

  fd-login(
    ng-if="$ctrl.$provider!=='email'"
    fd-login-provider="{{$ctrl.$provider}}"
    fd-login-popup="$mdMedia('gt-md')"
    fd-login-redirect="!$mdMedia('gt-md')"
    then="$ctrl.$then($data)"
    catch="$ctrl.$catch($error)")
    before
      wc-progress(wc-progress-type="linear")

  fd-login(
    ng-if="$ctrl.$provider==='email' && $ctrl.$credentials"
    fd-login-provider="email"
    fd-login-credentials="$ctrl.$credentials"
    then="$ctrl.$then($data)"
    catch="$ctrl.$catch($error)")
    before
      wc-progress(wc-progress-type="linear")

  md-dialog-content
    .md-title|{{$ctrl.$title}}
    .md-body-1|{{$ctrl.$body}}
    div(ng-repeat="provider in $ctrl.$providers")
      md-button.md-raised(
        ng-if="!$ctrl.$provider!=='email'"
        ng-class="provider"
        ng-click="$ctrl.$then(provider)")
        |{{provider|capitalize}}
      form.email-form(
        ng-init="credentials={}"
        ng-if="$ctrl.$provider==='email'")
        md-input-container
          label|{{$ctrl.$emailLabel?$ctrl.$emailLabel:'Email'}}
          input(
            name="email"
            ng-model="credentials.$email"
            type="email")
        md-input-container
          label|{{$ctrl.$passwordLabel?$ctrl.$passwordLabel:'Password'}}
          input(
            name="password"
            ng-model="credentials.$password"
            type="password")
        md-button.md-raised(
          ng-class="provider"
          ng-click="$ctrl.$then(provider, credentials)")
          |{{provider|capitalize}}
  md-dialog-actions
    div(flex)
    md-button(
      ng-click="$ctrl.$catch()")
      |{{$ctrl.$cancelLabel?$ctrl.$cancelLabel:'cancel'}}
  