{"version":3,"sources":["firedux/components/dispatcher/dispatcher.comp.es6"],"names":[],"mappings":";;;;;;AAAA,AAAC,CAAA,YAAY;AACX,cAAY,CAAC;;MACP,UAAU;AACH,aADP,UAAU,CACF,QAAQ,EAAE;4BADlB,UAAU;;AAEZ,UAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;KAC1B;;iBAHG,UAAU;;aAIJ,sBAAG;AACX,YAAI,IAAI,CAAC,kBAAkB,EAAE;AAC3B,cAAI,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;AACrC,gBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;WACxC,MAAM;AACL,gBAAI,CAAC,MAAM,GAAG,cAAc,CAAC;AAC7B,mBAAO,CAAC,KAAK,CAAC,6FAA6F,CAAC,CAAC;WAC9G;SACF,MAAM,IAAI,IAAI,CAAC,mBAAmB,EAAE;AACnC,cAAI,CAAC,WAAW,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;SAC5C;OACF;;;aACO,kBAAC,MAAM,EAAE;;;AACf,YACE,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,IACxB,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAC7B;AACA,cAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACjB,gBAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,gBAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;AACtC,gBAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,gBAAI,CAAC,QAAQ,CACV,QAAQ,CAAC,MAAM,CAAC,CAChB,IAAI,CAAC,UAAA,KAAK,EAAI;AACb,oBAAK,MAAM,GAAG,IAAI,CAAC;AACnB,oBAAK,OAAO,GAAG,SAAS,CAAC;AACzB,oBAAK,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,oBAAK,IAAI,CAAC,EAAC,KAAK,EAAL,KAAK,EAAC,CAAC,CAAC;aACpB,CAAC,SACI,CAAC,UAAA,MAAM,EAAI;AACf,oBAAK,MAAM,GAAG,MAAM,CAAC;AACrB,oBAAK,OAAO,GAAG,SAAS,CAAC;AACzB,oBAAK,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,4BAAU,CAAC,EAAC,MAAM,EAAN,MAAM,EAAC,CAAC,CAAC;aACtB,CAAC,CAAC;WACN;SACF;OACF;;;aACU,qBAAC,OAAO,EAAE;;;AACnB,YACE,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,EACxB;AACA,cAAI,KAAK,GAAG,IAAI,CAAC;AACjB,iBAAO,CAAC,OAAO,CAAC,OAAO,EAAE,UAAA,MAAM,EAAI;AACjC,gBAAI,EACF,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,AAC1D,EAAE;AACD,mBAAK,GAAG,KAAK,CAAC;aACf;WACF,CAAC,CAAC;AACH,cAAI,CAAC,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE;AAC1B,gBAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,gBAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;AACtC,gBAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,gBAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CACjC,IAAI,CAAC,UAAA,KAAK,EAAI;AACb,qBAAK,MAAM,GAAG,IAAI,CAAC;AACnB,qBAAK,OAAO,GAAG,SAAS,CAAC;AACzB,qBAAK,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,qBAAK,IAAI,CAAC,EAAC,KAAK,EAAL,KAAK,EAAC,CAAC,CAAC;aACpB,CAAC,SACI,CAAC,UAAA,MAAM,EAAI;AACf,qBAAK,MAAM,GAAG,MAAM,CAAC;AACrB,qBAAK,OAAO,GAAG,SAAS,CAAC;AACzB,qBAAK,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,6BAAU,CAAC,EAAC,MAAM,EAAN,MAAM,EAAC,CAAC,CAAC;aACtB,CAAC,CAAC;WACN;SACF;OACF;;;aACG,gBAAG;AACL,YAAI,IAAI,CAAC,OAAO,EAAE;AAChB,cAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;SACxC;OACF;;;WA9EG,UAAU;;;AAgFhB,SAAO,CACJ,MAAM,CAAC,sBAAsB,EAAE,EAAE,CAAC,CAClC,SAAS,CAAC,cAAc,EAAE;AACzB,cAAU,EAAE,UAAU;AACtB,eAAW,EAAE,+CAA+C;AAC5D,cAAU,EAAE;AACV,YAAM,EAAE,SAAS;AACjB,UAAI,EAAE,OAAO;AACb,eAAO,QAAQ;KAChB;AACD,YAAQ,EAAE;AACR,aAAO,EAAE,GAAG;AACZ,wBAAkB,EAAE,GAAG;AACvB,yBAAmB,EAAE,GAAG;AACxB,UAAI,EAAE,GAAG;AACT,eAAO,GAAG;KACX;GACF,CAAC,CAAC;CACN,CAAA,EAAE,CAAE","file":"firedux/components/dispatcher/dispatcher.comp.js","sourcesContent":["(function () {\n  'use strict';\n  class Controller {\n    constructor($firedux) {\n      this.$firedux = $firedux;\n    }\n    $onChanges() {\n      if (this.fdDispatcherAction) {\n        if (angular.isUndefined(this.fdClick)) {\n          this.dispatch(this.fdDispatcherAction);\n        } else {\n          this.$class = 'hidden-input';\n          console.error('fd-dispatcher:fd-click is being deprecated. Please make sure to change your implementation.');\n        }\n      } else if (this.fdDispatcherActions) {\n        this.dispatchAll(this.fdDispatcherActions);\n      }\n    }\n    dispatch(action) {\n      if (\n        angular.isObject(action) &&\n        angular.isString(action.type)\n      ) {\n        if (!this.$before) {\n          this.$before = true;\n          this.$ready = this.$error = undefined;\n          this.$firedux.$apply();\n          this.$firedux\n            .dispatch(action)\n            .then($data => {\n              this.$ready = true;\n              this.$before = undefined;\n              this.$firedux.$apply();\n              this.then({$data});\n            })\n            .catch($error => {\n              this.$error = $error;\n              this.$before = undefined;\n              this.$firedux.$apply();\n              this.catch({$error});\n            });\n        }\n      }\n    }\n    dispatchAll(actions) {\n      if (\n        angular.isArray(actions)\n      ) {\n        let valid = true;\n        angular.forEach(actions, action => {\n          if (!(\n            angular.isObject(action) && angular.isString(action.type)\n          )) {\n            valid = false;\n          }\n        });\n        if (!this.$before && valid) {\n          this.$before = true;\n          this.$ready = this.$error = undefined;\n          this.$firedux.$apply();\n          this.$firedux.dispatchGroup(actions)\n            .then($data => {\n              this.$ready = true;\n              this.$before = undefined;\n              this.$firedux.$apply();\n              this.then({$data});\n            })\n            .catch($error => {\n              this.$error = $error;\n              this.$before = undefined;\n              this.$firedux.$apply();\n              this.catch({$error});\n            });\n        }\n      }\n    }\n    $run() {\n      if (this.fdClick) {\n        this.dispatch(this.fdDispatcherAction);\n      }\n    }\n  }\n  angular\n    .module('firedux.fdDispatcher', [])\n    .component('fdDispatcher', {\n      controller: Controller,\n      templateUrl: 'firedux/components/dispatcher/dispatcher.html',\n      transclude: {\n        before: '?before',\n        then: '?then',\n        catch: '?catch'\n      },\n      bindings: {\n        fdClick: '<',\n        fdDispatcherAction: '<',\n        fdDispatcherActions: '<',\n        then: '&',\n        catch: '&'\n      }\n    });\n}());\n"],"sourceRoot":"/source/"}