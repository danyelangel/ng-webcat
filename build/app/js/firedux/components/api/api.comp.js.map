{"version":3,"sources":["firedux/components/api/api.comp.es6"],"names":[],"mappings":";;;;;;AAAA,AAAC,CAAA,YAAY;AACX,cAAY,CAAC;;MACP,UAAU;AACH,aADP,UAAU,CACF,QAAQ,EAAE;4BADlB,UAAU;;AAEZ,UAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;KAC1B;;iBAHG,UAAU;;aAOJ,oBAAC,OAAO,EAAE;AAClB,YACE,OAAO,CAAC,aAAa,IACrB,OAAO,CAAC,YAAY,IACpB,OAAO,CAAC,UAAU,IAClB,OAAO,CAAC,UAAU,EAClB;AACA,cAAI,CAAC,WAAW,EAAE,CAAC;SACpB;OACF;;;aACU,uBAAG;AACZ,YAAI,QAAQ,GAAG,IAAI,CAAC,aAAa;YAC7B,OAAO,GAAG,IAAI,CAAC,YAAY;YAC3B,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;AACpB,YACE,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAC1B,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,EAC1B;AACA,cAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;AACrC,gBAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;WAC/B;AACD,cAAI,IAAI,CAAC,UAAU,EAAE;AACnB,gBAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;WACtB;AACD,cAAI,CAAC,KAAK,YAAU,GAAG,SAAI,QAAQ,AAAE,CAAC;AACtC,cAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;AACxB,cAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,cAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;SACvC;OACF;;;aACI,eAAC,IAAI,EAAE;AACV,YAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,YAAI,CAAC,IAAI,CAAC;AACR,eAAK,EAAE,IAAI;SACZ,CAAC,CAAC;OACJ;;;aACK,gBAAC,GAAG,EAAE;AACV,YAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,YAAI,SAAM,CAAC;AACT,gBAAM,EAAE,GAAG;SACZ,CAAC,CAAC;OACJ;;;WA5CO,eAAG;AACT,eAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;OAC1B;;;WANG,UAAU;;;AAkDhB,SAAO,CACJ,MAAM,CAAC,eAAe,EAAE,EAAE,CAAC,CAC3B,SAAS,CAAC,OAAO,EAAE;AAClB,cAAU,EAAE,UAAU;AACtB,eAAW,EAAE,iCAAiC;AAC9C,cAAU,EAAE;AACV,YAAM,EAAE,SAAS;AACjB,UAAI,EAAE,OAAO;AACb,eAAO,QAAQ;KAChB;AACD,YAAQ,EAAE;AACR,mBAAa,EAAE,GAAG;AAClB,kBAAY,EAAE,GAAG;AACjB,gBAAU,EAAE,GAAG;AACf,UAAI,EAAE,GAAG;AACT,eAAO,GAAG;KACX;GACF,CAAC,CAAC;CACN,CAAA,EAAE,CAAE","file":"firedux/components/api/api.comp.js","sourcesContent":["(function () {\n  'use strict';\n  class Controller {\n    constructor($firedux) {\n      this.$firedux = $firedux;\n    }\n    get $uid() {\n      return this.$firedux.UID;\n    }\n    $onChanges(changes) {\n      if (\n        changes.fdApiEndpoint ||\n        changes.fdApiRequest ||\n        changes.fdApiQuery ||\n        changes.fdApiArray\n      ) {\n        this.makeRequest();\n      }\n    }\n    makeRequest() {\n      let endpoint = this.fdApiEndpoint,\n          request = this.fdApiRequest,\n          uid = this.$uid;\n      if (\n        angular.isString(endpoint) &&\n        angular.isDefined(request)\n      ) {\n        if (angular.isObject(this.fdApiQuery)) {\n          this.$query = this.fdApiQuery;\n        }\n        if (this.fdApiArray) {\n          this.$isArray = true;\n        }\n        this.$path = `api/${uid}/${endpoint}`;\n        this.$request = request;\n        this.$before = true;\n        this.$ready = this.$error = undefined;\n      }\n    }\n    $then(data) {\n      this.$ready = true;\n      this.then({\n        $data: data\n      });\n    }\n    $catch(err) {\n      this.$error = true;\n      this.catch({\n        $error: err\n      });\n    }\n  }\n  angular\n    .module('firedux.fdApi', [])\n    .component('fdApi', {\n      controller: Controller,\n      templateUrl: 'firedux/components/api/api.html',\n      transclude: {\n        before: '?before',\n        then: '?then',\n        catch: '?catch'\n      },\n      bindings: {\n        fdApiEndpoint: '@',\n        fdApiRequest: '<',\n        fdApiArray: '@',\n        then: '&',\n        catch: '&'\n      }\n    });\n}());\n"],"sourceRoot":"/source/"}