{"version":3,"sources":["firedux/components/api/api.comp.es6"],"names":[],"mappings":";;;;;;AAAA,AAAC,CAAA,YAAY;AACX,cAAY,CAAC;;MACP,UAAU;AACH,aADP,UAAU,CACF,QAAQ,EAAE;4BADlB,UAAU;;AAEZ,UAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,UAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,OAAI,CAAC,KAAK,CAAC,CAAC;KACtC;;iBAJG,UAAU;;aAKJ,oBAAC,OAAO,EAAE;AAClB,YACE,OAAO,CAAC,aAAa,IACrB,OAAO,CAAC,YAAY,IACpB,OAAO,CAAC,UAAU,EAClB;AACA,cAAI,CAAC,WAAW,EAAE,CAAC;SACpB;OACF;;;aACU,uBAAG;;;AACZ,YAAI,QAAQ,GAAG,IAAI,CAAC,aAAa;YAC7B,OAAO,GAAG,IAAI,CAAC,YAAY;YAC3B,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;AACpB,YACE,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAC1B,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,EAC1B;AACA,cAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC;AAChC,cAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,cAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,cAAI,CAAC,KAAK,YAAU,QAAQ,SAAI,GAAG,AAAE,CAAC;AACtC,cAAI,CAAC,QAAQ,GAAG;AACd,mBAAO,EAAE,OAAO;AAChB,qBAAS,EAAE,IAAI,CAAC,QAAQ,OAAI,CAAC,WAAW,CAAC;WAC1C,CAAC;AACF,cAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,cAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;AACtC,cAAI,CAAC,MAAM,CAAC;AACV,oBAAQ,EAAE,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;AACzC,oBAAK,OAAO,GAAG,OAAO,CAAC;AACvB,oBAAK,MAAM,GAAG,MAAM,CAAC;aACtB,CAAC;WACH,CAAC,CAAC;SACJ;OACF;;;aACI,eAAC,IAAI,EAAE;AACV,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AACnB,YAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,YAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,YAAI,CAAC,IAAI,CAAC;AACR,eAAK,EAAE,IAAI;SACZ,CAAC,CAAC;OACJ;;;aACK,gBAAC,GAAG,EAAE;AACV,YAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACjB,YAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,YAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,YAAI,SAAM,CAAC;AACT,gBAAM,EAAE,GAAG;SACZ,CAAC,CAAC;OACJ;;;WAvDG,UAAU;;;AAyDhB,SAAO,CACJ,MAAM,CAAC,eAAe,EAAE,EAAE,CAAC,CAC3B,SAAS,CAAC,OAAO,EAAE;AAClB,cAAU,EAAE,UAAU;AACtB,eAAW,EAAE,iCAAiC;AAC9C,cAAU,EAAE;AACV,YAAM,EAAE,SAAS;AACjB,UAAI,EAAE,OAAO;AACb,eAAO,QAAQ;KAChB;AACD,YAAQ,EAAE;AACR,mBAAa,EAAE,GAAG;AAClB,kBAAY,EAAE,GAAG;AACjB,gBAAU,EAAE,GAAG;AACf,UAAI,EAAE,GAAG;AACT,eAAO,GAAG;AACV,YAAM,EAAE,GAAG;KACZ;GACF,CAAC,CAAC;CACN,CAAA,EAAE,CAAE","file":"firedux/components/api/api.comp.js","sourcesContent":["(function () {\n  'use strict';\n  class Controller {\n    constructor($firedux) {\n      this.$firedux = $firedux;\n      this.$uid = this.$firedux.var('UID');\n    }\n    $onChanges(changes) {\n      if (\n        changes.fdApiEndpoint ||\n        changes.fdApiRequest ||\n        changes.fdApiArray\n      ) {\n        this.makeRequest();\n      }\n    }\n    makeRequest() {\n      let endpoint = this.fdApiEndpoint,\n          request = this.fdApiRequest,\n          uid = this.$uid;\n      if (\n        angular.isString(endpoint) &&\n        angular.isDefined(request)\n      ) {\n        this.$isArray = this.fdApiArray;\n        this.$path = null;\n        this.$firedux.$apply();\n        this.$path = `api/${endpoint}/${uid}`;\n        this.$request = {\n          request: request,\n          timestamp: this.$firedux.var('TIMESTAMP')\n        };\n        this.$before = true;\n        this.$ready = this.$error = undefined;\n        this.before({\n          $promise: new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n          })\n        });\n      }\n    }\n    $then(data) {\n      this.resolve(data);\n      this.$ready = true;\n      this.$before = false;\n      this.then({\n        $data: data\n      });\n    }\n    $catch(err) {\n      this.reject(err);\n      this.$error = true;\n      this.$before = false;\n      this.catch({\n        $error: err\n      });\n    }\n  }\n  angular\n    .module('firedux.fdApi', [])\n    .component('fdApi', {\n      controller: Controller,\n      templateUrl: 'firedux/components/api/api.html',\n      transclude: {\n        before: '?before',\n        then: '?then',\n        catch: '?catch'\n      },\n      bindings: {\n        fdApiEndpoint: '@',\n        fdApiRequest: '<',\n        fdApiArray: '<',\n        then: '&',\n        catch: '&',\n        before: '&'\n      }\n    });\n}());\n"],"sourceRoot":"/source/"}