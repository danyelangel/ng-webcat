{"version":3,"sources":["firedux/service/firedux-analytics.service.es6"],"names":[],"mappings":"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","file":"firedux/service/firedux-analytics.service.js","sourcesContent":["(function () {\n  'use strict';\n  class Service {\n    constructor($window, $rootScope) {\n      this.$window = $window;\n      this.$rootScope = $rootScope;\n    }\n    init(analytics, pixel) {\n      if (\n        angular.isFunction(this.$window.ga) &&\n        angular.isString(analytics)\n      ) {\n        this.$window.ga('create', analytics, 'auto');\n      }\n      if (\n        angular.isFunction(this.$window.fbq) &&\n        angular.isString(pixel)\n      ) {\n        this.$window.fbq('init', pixel);\n      }\n      if (analytics || pixel) {\n        this.trackPageViews();\n        this.trackDispatcher();\n      }\n    }\n    // ANALYTICS\n    sendAnalyticsHit(hitType, params = {}) {\n      if (\n        angular.isString(hitType) &&\n        angular.isFunction(this.$window.ga)\n      ) {\n        let hit = Object.assign({hitType}, params);\n        this.$window.ga(\n          'send',\n          hit\n        );\n      }\n    }\n    // PIXEL\n    sendPixelHit(hitType, params = {}) {\n      if (\n        angular.isString(hitType) &&\n        angular.isFunction(this.$window.fbq)\n      ) {\n        this.$window.fbq(\n          'track',\n          hitType,\n          params\n        );\n      }\n    }\n    // TRACKERS\n    trackPageViews() {\n      function toUrl(state) {\n        return state.split('.').join('/');\n      }\n      this.$rootScope.$on(\n        '$stateChangeSuccess',\n        (event, toState) => {\n          this.pageView(toUrl(toState.name));\n        });\n    }\n    trackDispatcher() {\n      this.$rootScope.$on(\n        'fd:action',\n        (event, data) => {\n          this.action(data);\n        });\n      this.$rootScope.$on(\n        'fd:error',\n        (event, data) => {\n          this.error(data);\n        });\n    }\n    // EVENTS\n    pageView(page) {\n      if (angular.isString(page)) {\n        this.sendAnalyticsHit('pageview', {page});\n        this.sendPixelHit('ViewContent', {\n          /* eslint-disable */\n          /* jshint ignore:start */\n          content_name: page\n          /* jshint ignore:end */\n          /* eslint-enable */\n        });\n      }\n    }\n    error(exDescription) {\n      if (angular.isString(exDescription)) {\n        this.sendAnalyticsHit('exception', {exDescription});\n      }\n    }\n    action(eventAction, eventLabel) {\n      if (angular.isString(eventAction)) {\n        this.sendAnalyticsHit('event', {\n          eventCategory: 'Action',\n          eventAction,\n          eventLabel\n        });\n      }\n    }\n  }\n  angular\n    .module('firedux.analytics', [])\n    .service('$fireduxAnalytics', Service);\n}());\n"],"sourceRoot":"/source/"}